(this.webpackJsonplmitter=this.webpackJsonplmitter||[]).push([[0],{42:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(31),i=n.n(a),s=n(6),o=n(18),u=n(9),l=n(5),j=n.n(l),d=n(8),b=n(21);n(38),n(50),n(51);b.a.initializeApp({apiKey:"AIzaSyBF1SVfwbf5Gdjy-Uu5DdjRPHebzzolfZA",authDomain:"lmitter-564dc.firebaseapp.com",projectId:"lmitter-564dc",storageBucket:"lmitter-564dc.appspot.com",messagingSenderId:"78530965032",appId:"1:78530965032:web:7a0363a2e5fe5b34400f1d"});var O=b.a,f=b.a.auth(),m=b.a.firestore(),h=b.a.storage(),p=n(17),x=n(7),v=n(1);function g(){var e=Object(c.useState)({email:"",password:""}),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],l=n.email,b=n.password,O=function(e){var t=e.target,c=t.name,a=t.value;r(Object(x.a)(Object(x.a)({},n),{},Object(p.a)({},c,a)))},m=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.signInWithEmailAndPassword(l,b);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),u(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("form",{onSubmit:m,className:"loginForm",children:[Object(v.jsx)("input",{name:"email",type:"text",placeholder:"Email",value:l,required:!0,onChange:O}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:b,required:!0,onChange:O}),Object(v.jsx)("button",{type:"submit",children:"Log In"}),o]})}var w=r.a.memo(g),A=Object(c.createContext)(),I=Object(c.createContext)(),y=Object(c.createContext)(),C=function(e){var t=e.children,n=Object(c.useState)({}),r=Object(s.a)(n,2),a=r[0],i=r[1];Object(c.useEffect)((function(){return f.onAuthStateChanged((function(e){i(e?{displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}}:{})})),function(){i({})}}),[]);var o=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("users").where("userId","==",t).get();case 2:return n=e.sent,c={data:n.docs[0].data(),id:n.docs[0].id},e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(A.Provider,{value:a,children:Object(v.jsx)(I.Provider,{value:function(){var e=f.currentUser;i({displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}})},children:Object(v.jsx)(y.Provider,{value:o,children:t})})})};function N(){var e=Object(c.useContext)(A);if(!e)throw new Error("Can not find userContext");return e}function k(){var e=Object(c.useContext)(I);if(!e)throw new Error("Can not find resfreshUser function");return e}function S(){var e=Object(c.useContext)(y);if(!e)throw new Error("Can not find GetUserData function");return e}var U=n.p+"static/media/logo_clean.dd6c899f.png";function E(){var e=Object(c.useState)({username:"",email:"",password:""}),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],l=k(),b=n.username,O=n.email,h=n.password,g=function(e){var t=e.target,c=t.name,a=t.value;r(Object(x.a)(Object(x.a)({},n),{},Object(p.a)({},c,a)))},w=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.createUserWithEmailAndPassword(O,h);case 4:f.onAuthStateChanged((function(e){if(e){e.updateProfile({displayName:b,photoURL:U});var t={date:e.metadata.creationTime,email:e.email,username:b,userId:e.uid,photoURL:U,userIntro:"Hello, I am ".concat(b)};m.collection("users").add(t)}})),setTimeout(l,900),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),u(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("form",{onSubmit:w,className:"joinForm",children:[Object(v.jsx)("input",{name:"username",type:"text",placeholder:"Your Name",value:b,required:!0,onChange:g}),Object(v.jsx)("input",{name:"email",type:"text",placeholder:"Email",value:O,required:!0,onChange:g}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:h,required:!0,onChange:g}),Object(v.jsx)("button",{type:"submit",children:"Create Account"}),Object(v.jsx)("span",{children:o})]})}var R=r.a.memo(E),P=(n(42),function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"googgle"===(n=t.target.name)?c=new O.auth.GoogleAuthProvider:"github"===n&&(c=new O.auth.GithubAuthProvider),e.next=4,f.signInWithPopup(c);case 4:f.onAuthStateChanged((function(e){e&&m.collection("users").where("userId","==",e.uid).onSnapshot((function(t){if(0===t.docs.length){var n={date:e.metadata.creationTime,email:e.email,username:e.displayName,userId:e.uid,photoURL:e.photoURL,userIntro:"Hello, I am ".concat(e.displayName)};m.collection("users").add(n)}}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"accountForm",children:[Object(v.jsxs)("h1",{children:[Object(v.jsx)("img",{src:U,alt:"logo"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"lmitter"}),Object(v.jsx)("p",{children:"Get on Our Social Waves"})]})]}),Object(v.jsxs)("div",{className:"authBox",children:[Object(v.jsxs)("div",{className:"leftBox",children:[n?Object(v.jsx)(R,{}):Object(v.jsx)(w,{}),Object(v.jsx)("button",{onClick:function(){return r((function(e){return!e}))},children:n?"Log In":"Create Account"})]}),Object(v.jsxs)("ul",{className:"rightBox",children:[Object(v.jsx)("li",{children:Object(v.jsx)("button",{name:"googgle",onClick:a,children:"Continue with Google"})}),Object(v.jsx)("li",{children:Object(v.jsx)("button",{name:"github",onClick:a,children:"Continue with Github"})})]})]})]})})}),L=n(24),D=n(52);function M(e){var t=e.lmitteObj,n=N(),r=n.uid,a=n.displayName,i=Object(c.useState)(!1),u=Object(s.a)(i,2),l=u[0],b=u[1],O=Object(c.useState)(!1),f=Object(s.a)(O,2),h=f[0],p=f[1],x=Object(c.useState)(""),g=Object(s.a)(x,2),w=g[0],A=g[1],I=Object(c.useState)(Object(D.a)()),y=Object(s.a)(I,2),C=y[0],k=y[1],S=t.likedId,U=t.comments,E=Object(c.useCallback)(Object(d.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.doc("lmittes/".concat(t.id)).get();case 2:n=e.sent,c=n.data(),c.likedId.filter((function(e){return e===r})).length>0&&b(!0);case 6:case"end":return e.stop()}}),e)}))),[t,r]);Object(c.useEffect)((function(){return E(),function(){b(!1)}}),[E]);var R=function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b((function(e){return!e})),l){e.next=7;break}return e.next=5,m.doc("lmittes/".concat(t.id)).update({likedId:S.concat(r)});case 5:e.next=9;break;case 7:return e.next=9,m.doc("lmittes/".concat(t.id)).update({likedId:S.filter((function(e){return e!==r}))});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(j.a.mark((function e(n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c={text:w,creatorId:r,creator:a,id:C},e.next=4,m.doc("lmittes/".concat(t.id)).update({comments:U.concat(c)});case 4:k((function(e){return Object(D.a)()})),A("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"socialBlock",children:[Object(v.jsxs)("div",{className:"socialLine",children:[Object(v.jsx)("span",{children:S.length}),Object(v.jsx)("button",{onClick:R,children:l?Object(v.jsx)(L.b,{}):Object(v.jsx)(L.c,{})}),Object(v.jsx)("span",{children:U.length}),Object(v.jsx)("button",{onClick:function(){p((function(e){return!e}))},children:Object(v.jsx)(L.a,{})})]}),h&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{onSubmit:P,children:[Object(v.jsx)("input",{type:"text",placeholder:"Leave your comment",value:w,onChange:function(e){var t=e.target.value;A(t)}}),Object(v.jsx)("button",{children:"comment"})]}),U.length>0&&Object(v.jsx)("ul",{className:"comment",children:U.map((function(e){return Object(v.jsxs)("li",{children:[Object(v.jsx)(o.b,{to:r===e.creatorId?"/profile":"/profile/".concat(e.creatorId),children:e.creator}),e.text]},e.id)}))})]})]})}var B=r.a.memo(M),F=function(e){var t=e.lmitteObj,n=N(),r=S(),a=Object(c.useState)(t.text),i=Object(s.a)(a,2),u=i[0],l=i[1],b=Object(c.useState)({}),O=Object(s.a)(b,2),f=O[0],g=O[1],w=Object(c.useMemo)((function(){return Boolean(n.uid===t.creatorId)}),[n.uid,t.creatorId]),A=Object(c.useState)({edit:!1,option:!1}),I=Object(s.a)(A,2),y=I[0],C=I[1],k=y.edit,U=y.option,E=Object(c.useCallback)(Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t.creatorId);case 2:n=e.sent,g(n.data);case 4:case"end":return e.stop()}}),e)}))),[t.creatorId,r]);Object(c.useEffect)((function(){return E(),function(){g({})}}),[E]);var R,P=(Date.now()-t.createdAt)/1e3;R=P<60?"now":60===Math.floor(P)?"1 minute ago":Math.floor(P)<3600?"".concat(Math.floor(P/60)," mintues ago"):3600===Math.floor(P)?"1 hour ago":Math.floor(P)<86400?"".concat(Math.floor(P/60/60)," hours ago"):"".concat(t.date);var L=function(e){var t=e.target.name;C((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(p.a)({},t,!e[t]))}))},D=Object(c.useCallback)((function(e){var t=e.target.value;l(t)}),[]),M=function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,m.doc("lmittes/".concat(t.id)).update({text:u});case 3:C((function(e){return!e}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this lmitte?")){e.next=7;break}if(""===t.fileUrl){e.next=5;break}return e.next=5,h.refFromURL(t.fileUrl).delete();case 5:return e.next=7,m.doc("lmittes/".concat(t.id)).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"creatorInfo",children:[Object(v.jsxs)("div",{className:"left",children:[Object(v.jsxs)(o.b,{to:w?"/profile":"/profile/".concat(t.creatorId),className:"creator",children:[Object(v.jsx)("figure",{children:Object(v.jsx)("img",{src:f.photoURL,alt:"profile",width:"50"})}),Object(v.jsx)("span",{children:f.username})]}),Object(v.jsx)("span",{className:"date",children:R})]}),Object(v.jsx)("div",{className:"right",children:w&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{name:"option",onClick:L,children:"\u2022 \u2022 \u2022"}),U&&Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)("button",{name:"edit",onClick:L,children:"edit"})}),Object(v.jsx)("li",{children:Object(v.jsx)("button",{onClick:F,children:"delete"})})]})]})})]}),k?Object(v.jsx)(v.Fragment,{children:w&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{onSubmit:M,className:"editForm",children:[Object(v.jsx)("input",{type:"text",placeholder:"Edit your lmitte!",value:u,required:!0,onChange:D}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{type:"submit",children:"Update Lmitte"}),Object(v.jsx)("button",{type:"button",onClick:function(){C((function(e){return!e}))},children:"Cancel"})]})]})})}):Object(v.jsxs)(v.Fragment,{children:[t.text&&Object(v.jsx)("p",{className:"lmitteText",children:t.text}),t.fileUrl&&Object(v.jsx)("img",{src:t.fileUrl,alt:""}),Object(v.jsx)(B,{lmitteObj:t})]})]})},H=r.a.memo(F),q="data:image/png;base64,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";function z(){var e=N(),t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),u=o[0],l=o[1],b=Object(c.useRef)(),O=Object(c.useCallback)((function(e){var t=e.target.value;a((function(e){return t}))}),[]),f=Object(c.useCallback)((function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;l(t)},n.readAsDataURL(t)}),[]),p=function(){l(""),b.current.value=""},x=function(){var t=Object(d.a)(j.a.mark((function t(n){var c,i,s,o,l,d,b,O;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c="",i=new Date,s=i.getFullYear(),o=i.getMonth(),l=i.getDate(),""===r&&""===u){t.next=22;break}if(""===u){t.next=15;break}return d=h.ref().child("lmittes/".concat(e.uid,"/").concat(Object(D.a)())),t.next=11,d.putString(u,"data_url");case 11:return b=t.sent,t.next=14,b.ref.getDownloadURL();case 14:c=t.sent;case 15:return O={date:"".concat(s,"/").concat(o+1,"/").concat(l),text:r,createdAt:Date.now(),creatorId:e.uid,fileUrl:c,likedId:[],comments:[]},t.next=18,m.collection("lmittes").add(O);case 18:a(""),p(),t.next=23;break;case 22:window.alert("Sorry! You can't upload an empty post!");case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("form",{onSubmit:x,className:"lmitteForm",children:Object(v.jsxs)("div",{className:"formWrap",children:[Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("input",{value:r,type:"text",placeholder:"What's on your mind?",onChange:O}),Object(v.jsx)("input",{id:"lmittePhoto",type:"file",accept:"image/*",onChange:f,ref:b}),u?Object(v.jsxs)("div",{children:[Object(v.jsx)("figure",{children:Object(v.jsx)("img",{src:u,alt:"upload file"})}),Object(v.jsx)("button",{onClick:p,children:"Clear Image"})]}):Object(v.jsxs)("label",{htmlFor:"lmittePhoto",children:[Object(v.jsx)("img",{src:q,alt:"icon"}),Object(v.jsx)("span",{children:"Add a photo..."})]})]}),Object(v.jsx)("button",{type:"submit",children:"Lmitte"})]})})}var T=r.a.memo(z);var Y=function(e){var t=e.loadingOn,n=Object(c.useState)(!1),r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){return setTimeout((function(){i(!1)}),1e3),function(){i(!0)}}),[t]),Object(v.jsx)(v.Fragment,{children:(a||"keep"===t)&&Object(v.jsx)("div",{className:"loading",children:Object(v.jsxs)("svg",{children:[Object(v.jsx)("defs",{children:Object(v.jsxs)("linearGradient",{id:"linear",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[Object(v.jsx)("stop",{offset:"0%",stopColor:"#ff7bac"}),Object(v.jsx)("stop",{offset:"100%",stopColor:"#06a3c4"})]})}),Object(v.jsx)("circle",{cx:"50",cy:"50",r:"10",stroke:"url(#linear)"})]})})})},K=(n(47),function(){var e=N(),t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useCallback)((function(){m.collection("lmittes").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(x.a)(Object(x.a)({},e.data()),{},{id:e.id})}));a(t)}))}),[]);return Object(c.useEffect)((function(){return i(),function(){a([])}}),[i]),Object(v.jsxs)("div",{className:"home wrap",children:[Object(v.jsxs)("div",{className:"userForm",children:[Object(v.jsxs)("div",{className:"myInfo",children:[Object(v.jsx)("figure",{children:Object(v.jsx)("img",{src:e.photoURL,alt:"my profile",width:"100"})}),Object(v.jsx)("p",{children:e.displayName})]}),Object(v.jsx)(T,{})]}),0!==r.length&&Object(v.jsx)(Y,{loadingOn:r}),Object(v.jsx)("ul",{className:"lmittes",children:r.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(H,{lmitteObj:e})},e.id)}))})]})}),X=r.a.memo(K);var V=function(){var e=N(),t=Object(u.f)();return Object(v.jsx)("header",{children:Object(v.jsxs)("div",{className:"wrap",children:[Object(v.jsx)("h1",{children:Object(v.jsxs)(o.b,{to:"/",children:[Object(v.jsx)("img",{src:U,alt:"logo"}),Object(v.jsx)("span",{children:"lmitter"})]})}),Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsxs)(o.b,{to:"/profile",children:[e.displayName,"'s Profile"]})}),Object(v.jsx)("li",{children:Object(v.jsx)("button",{onClick:function(){window.confirm("Do you want really to leave Lmitter?")&&(f.signOut(),t.push("/"))},children:"Log Out"})})]})})]})})};function J(){var e=N(),t=e.displayName,n=e.photoURL,r=S(),a=k(),i=Object(c.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1],b=Object(c.useState)({myPhoto:"",myIntro:"",docId:""}),O=Object(s.a)(b,2),f=O[0],g=O[1],w=f.myPhoto,A=f.myIntro,I=f.docId,y=Object(c.useState)({newName:e.displayName,newPhoto:"",newIntro:""}),C=Object(s.a)(y,2),U=C[0],E=C[1],R=U.newName,P=U.newPhoto,L=U.newIntro,M=Object(c.useRef)(),B=Object(c.useRef)(),F=Object(c.useCallback)(Object(d.a)(j.a.mark((function t(){var n,c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e.uid);case 2:n=t.sent,c=n.data,a=n.id,g({myPhoto:c.photoURL,myIntro:c.userIntro,docId:a}),E((function(e){return Object(x.a)(Object(x.a)({},e),{},{newIntro:c.userIntro})}));case 6:case"end":return t.stop()}}),t)}))),[e.uid,r]);Object(c.useEffect)((function(){return F(),function(){g({})}}),[F]);var H=Object(c.useCallback)((function(e){var t=e.target,n=t.value,c=t.name;E((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(p.a)({},c,n))}))}),[]),z=function(){var n=Object(d.a)(j.a.mark((function n(c){var r,i,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),B.current.scrollIntoView(),t===R||""===R){n.next=7;break}return n.next=5,e.updateProfile({displayName:R});case 5:return n.next=7,m.doc("users/".concat(I)).update({username:R});case 7:if(A===L||""===L){n.next=10;break}return n.next=10,m.doc("users/".concat(I)).update({userIntro:L});case 10:if(!P){n.next=27;break}return g(Object(x.a)(Object(x.a)({},f),{},{myPhoto:null})),n.next=14,h.ref("profile/".concat(e.uid)).listAll();case 14:return n.sent.items.map((function(e){return e.delete()})),r=h.ref().child("profile/".concat(e.uid,"/").concat(Object(D.a)())),n.next=19,r.putString(P,"data_url");case 19:return i=n.sent,n.next=22,i.ref.getDownloadURL();case 22:return s=n.sent,n.next=25,e.updateProfile({photoURL:s});case 25:return n.next=27,m.doc("users/".concat(I)).update({photoURL:s});case 27:l(!1),E((function(e){return Object(x.a)(Object(x.a)({},e),{},{newPhoto:""})})),a();case 30:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),T=[w,e,A];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"userInfo",ref:B,children:Object(v.jsxs)("div",{className:"userWrap",children:[w?Object(v.jsx)("img",{src:n,alt:"",width:"100"}):Object(v.jsx)(Y,{loadingOn:"keep"}),Object(v.jsx)("h3",{children:t}),Object(v.jsx)("p",{children:A}),Object(v.jsx)(Y,{loadingOn:T})]})}),Object(v.jsx)("button",{type:"button",onClick:function(){l((function(e){return!e}))},children:"Update"}),u&&Object(v.jsxs)("form",{onSubmit:z,className:"updateForm",children:[Object(v.jsxs)("fieldset",{className:"updatePhoto",children:[Object(v.jsx)("input",{id:"photo",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){var t=e.currentTarget.result;E(Object(x.a)(Object(x.a)({},U),{},{newPhoto:t}))}}},ref:M}),P?Object(v.jsxs)("div",{children:[Object(v.jsx)("img",{src:P,alt:"upload file"}),Object(v.jsx)("button",{onClick:function(){E((function(e){return Object(x.a)(Object(x.a)({},e),{},{newPhoto:""})})),M.current.value=""},children:"Clear Image"})]}):Object(v.jsxs)("label",{htmlFor:"photo",children:[Object(v.jsx)("img",{src:q,alt:"icon"}),Object(v.jsx)("span",{children:"Change my photo..."})]})]}),Object(v.jsxs)("fieldset",{className:"updateMyInfo",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Name"}),Object(v.jsx)("input",{id:"name",type:"text",name:"newName",placeholder:"Enter your nickname",value:R,onChange:H,maxLength:"10"}),Object(v.jsx)("label",{htmlFor:"intro",children:"Intro"}),Object(v.jsx)("input",{id:"intro",type:"text",name:"newIntro",placeholder:"Enter your introduction",value:L,onChange:H,maxLength:"100"})]}),Object(v.jsx)("button",{type:"submit",children:"Update Profile"})]})]})}var Q=r.a.memo(J),G=function(){var e=N(),t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useCallback)(Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.collection("lmittes").where("creatorId","==",e.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(x.a)(Object(x.a)({},e.data()),{},{id:e.id})}));a(t)}));case 1:case"end":return t.stop()}}),t)}))),[e.uid]);return Object(c.useEffect)((function(){return i(),function(){a([])}}),[i]),Object(v.jsxs)("div",{className:"myProfile wrap",children:[Object(v.jsx)(Q,{}),Object(v.jsx)(T,{}),Object(v.jsx)(Y,{loadingOn:r}),Object(v.jsx)("ul",{className:"lmittes",children:r.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(H,{lmitteObj:e})},e.id)}))})]})},W=r.a.memo(G),Z=function(){var e=Object(u.g)().userId,t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],i=S(),o=Object(c.useState)({}),l=Object(s.a)(o,2),b=l[0],O=l[1],f=Object(c.useCallback)(Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:n=t.sent,O(n.data);case 4:case"end":return t.stop()}}),t)}))),[e,i]);Object(c.useEffect)((function(){f()}),[f]);var h=Object(c.useCallback)(Object(d.a)(j.a.mark((function t(){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.collection("lmittes").where("creatorId","==",e).orderBy("createdAt","desc").get();case 2:n=t.sent,c=n.docs.map((function(e){return Object(x.a)(Object(x.a)({},e.data()),{},{id:e.id})})),a(c);case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(c.useEffect)((function(){return h(),function(){a([])}}),[h]),Object(v.jsxs)("div",{className:"yourProfile wrap",children:[Object(v.jsx)("div",{className:"userInfo",children:Object(v.jsxs)("div",{className:"userWrap",children:[Object(v.jsx)("img",{src:b.photoURL,alt:"",width:"100"}),Object(v.jsx)("h3",{children:b.username}),Object(v.jsx)("p",{children:b.userIntro})]})}),Object(v.jsx)(Y,{loadingOn:r}),Object(v.jsx)("ul",{className:"lmittes",children:r.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(H,{lmitteObj:e})},e.id)}))})]})},_=r.a.memo(Z),$=function(){var e=N(),t=Boolean(e.uid);return Object(v.jsx)(o.a,{children:Object(v.jsx)(u.c,{children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(V,{}),Object(v.jsx)(u.a,{exact:!0,path:"/",children:Object(v.jsx)(X,{})}),Object(v.jsx)(u.a,{exact:!0,path:"/profile",children:Object(v.jsx)(W,{})}),Object(v.jsx)(u.a,{path:"/profile/:userId",children:Object(v.jsx)(_,{})})]}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(u.a,{exact:!0,path:"/",children:Object(v.jsx)(P,{})})})})})};n(48);function ee(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){document.title="lmitter | Social Waves",f.onAuthStateChanged((function(){return r(!0)}))}),[]),Object(v.jsx)("div",{className:"bodyWrap",children:Object(v.jsxs)(C,{children:[n?Object(v.jsx)($,{}):Object(v.jsx)("div",{className:"initFalse",children:Object(v.jsx)(Y,{loadingOn:"keep"})}),Object(v.jsx)("footer",{children:"\xa9 2021 Lmitter"})]})})}var te=r.a.memo(ee);i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(te,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.87a5ae38.chunk.js.map